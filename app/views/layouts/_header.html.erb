<div class="header-nav-banner">
  <% current_section = request.path_parameters[:controller] %>
  <% if current_user && current_user.demo == true %>
    <div class="site_notice">
      <p>Site currently in Demo mode</p>
    </div>
  <% end %>
  <header id="top" role="banner">
    <div class="block">
      <% if logged_in? && current_user %>
        <%= link_to "Site Navigation", href: "#nav", id: "nav-open-btn", class: "nav-btn open-btn svg-btn", data: { turbolinks: 'false' } do %>
          <%= icomoon('menu') %>
        <% end %>
      <% end %>

      <h1><%= icomoon('logo') %>
      <%= link_to "Stockcubes", root_path, id: "logo" %></h1>
      <% if not logged_in? && current_user %>
          <%= link_to login_path, class: "profile_item" do %>
            <p>Sign in</p>
            <span class="account-btn<%= (current_section == 'users') || (current_section == 'sessions') ? ' current_section' : '' %>">
              <%= icomoon('user') %>
            </span>
          <% end %>
      <% elsif current_user.demo == true %>
        <span class="profile_item demo_mode">
          <span class="account-btn<%= (current_section == 'users') || (current_section == 'sessions') ? ' current_section' : '' %>">
            <%= icomoon('user') %>
          </span>
        </span>
      <% else %>
        <%= link_to edit_user_path(current_user), class: "account-btn#{(current_section == 'users') || (current_section == 'sessions') ? ' current_section' : ''}" do %>
          <%= icomoon('user') %>
        <% end %>
      <% end %>
    </div>
  </header>

  <nav id="nav" role="navigation">
    <div class="block">
    <h1><%= icomoon('logo') %><%= link_to "Stockcubes", root_path, id: "logo" %></h1>
      <h2 class="block-title">Sections</h2>
      <ul>
      <% if logged_in? && current_user %>
        <li class="<% current_section == 'recipes' ? 'current_section' : ''%>"><%= link_to "Recipes", recipes_path %>
        </li><% end %><!--
      --><% if logged_in? && current_user && current_user.admin %><!--
      --><li <% if current_section == "ingredients" %>class="current_section"<% end %>><%= link_to "Ingredients", ingredients_path %></li><!--
      --><% end %><!--
      --><% if logged_in? && current_user && current_user.shopping_lists.last && current_user.shopping_lists.last.recipes.length != 0 %><!--
      --><li<% if request.path_parameters[:controller] == "shopping_lists" && request.path_parameters[:action] == "show_ingredients" && request.path_parameters[:id].to_i == current_user.shopping_lists.last.id.to_i %> class="current_section"<% end %>><%= link_to "Current shopping list", latest_shopping_list_path %>
      </li><!--
      --><% end %><% if logged_in? && current_user %><!--
      --><li <% if current_section == "cupboards" %>class="current_section"<% end %>><%= link_to "Cupboard", cupboards_path %></li><% end %>
      </ul>
      <% if not logged_in? && current_user %>
        <%= link_to login_path, class: "profile_item" do %>
          <p>Sign in</p>
          <span class="account-btn<%= (current_section == 'users') || (current_section == 'sessions') ? ' current_section' : '' %>">
            <%= icomoon('user') %>
          </span>
        <% end %>
      <% elsif current_user.demo == true %>
        <span class="profile_item demo_mode">
          <p>Demo</p>
          <span class="account-btn">
            <%= icomoon('user') %>
          </span>
        </span>
      <% else %>
        <%= link_to edit_user_path(current_user), class: "account-btn#{(current_section == 'users') || (current_section == 'sessions') ? ' current_section' : ''}" do %>
          <%= icomoon('user') %>
        <% end %>
      <% end %>
      <%= link_to "Return to Content", href: "#top", id: "nav-close-btn", class: "nav-btn close-btn svg-btn", data: { turbolinks: 'false' } do %>
        <%= icomoon('close') %>
      <% end %>
    </div>
  </nav>
</div>
