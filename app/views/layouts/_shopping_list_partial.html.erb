<aside id="planner_shopping_list">
	<h2>Shopping List <% if shopping_list_portions.length > 0 %>(<%= checked_portions %>/<%= shopping_list_portions.length %>)<% end %></h2>
	<button class="list_toggle">
		<span class="cross icon_char" title="Close shopping list">
			<%= icomoon('close') %>
		</span>
		<span class="chevron_left icon_char" title="Open shopping list">
			<%= icomoon('navigate_before') %>
		</span>
	</button>
	<% if shopping_list_portions.length == 0 %>
		<ul><p>Shopping List is currently empty, move some recipes to your planner to get items added to this list</p></ul>
	<% else %>
		<ul class="planner_sl-recipe_list">
			<% shopping_list_portions.each do |portion| %>
				<li id="<%= planner_portion_id_hash.encode(portion.id) %>" class="shopping_list_portion <%= portion.class.name == "CombiPlannerShoppingListPortion" ? 'combi_portion' : 'individual_portion' %> <%= portion.checked ? 'portion_checked' : '' %>">
					<h6 class="mb-2"><%= portion.class.name == "CombiPlannerShoppingListPortion" ? "Combi portion (#{portion.planner_shopping_list_portions.length} recipes)" : (portion.planner_recipe ? "Recipe portion - #{portion.planner_recipe.recipe.title}" : "Recipe portion") %></h6>
					<p>
						<label>
							<%= check_box_tag "planner_shopping_list_portions_add[#{planner_portion_id_hash.encode(portion.id)}]", "planner_shopping_list_portions_add", false, class: "" %>
							<%= portion.amount %> <%= portion.unit.name %> <%= portion.ingredient.name %>
						</label>
					</p>
					<hr />
				</li>
			<% end %>
		</ul>
	<% end %>
	<div class="shop_online_block">
		<% if shopping_list_portions.length == 0 %>
			<button id="view-whisk-list" class="list_block--collection--action">Open online shopping list</button>
		<% else %>
			<button id="whisk-add-products" class="list_block--collection--action">Add to online shopping list</button>
		<% end %>
	</div>
</aside>
