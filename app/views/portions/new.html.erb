<% params[:recipe_id] ? recipe_title = Recipe.find(params[:recipe_id]).title : redirect = true %>
<% if redirect %>
 <script type="text/javascript">
    window.location.href="/recipes"
  </script>
<% end %>
<% provide(:title, "Add ingredient to \"#{@recipe_title}\"") %>

<%= form_for @portion, :html => {class: 'content_rich--wrapper'}, id: "portion-form", :validate => true do |p| %>
	<div class="content_rich">
    <div class="content_rich--title_block">
      <div class="content_rich--title_row">
        <h1 class="recipe-title">Adding an ingredient to "<%= recipe_title.to_s %>"</h1>
				<%= link_to "Cancel", recipe_path(params[:recipe_id]), class: "list_block--collection--action"  %>
			</div>
		</div>
		<div class="content_rich--row">
			<%= select_tag :ingredient_id, options_from_collection_for_select(@ingredients, "id", "name"), class: "pretty_form--row--pretty_select", prompt: "Pick your ingredient", required: true %>
		</div>
		<div class="content_rich--row">
			<%= hidden_field_tag "recipe_id", params[:recipe_id] %>
			<%= text_field_tag :amount, '', placeholder: '250', validate: true %>
			<%= select_tag "unit_number", options_from_collection_for_select(@unit_select, "id", "name", 8), class: "pretty_form--row--pretty_select", aria: {label: "Pick the units for the ingredient"} %>
		</div>
		<div class="content_rich--row">
			<%= submit_tag "Save ingredient", class: "list_block--collection--action" %>
		</div>
	</div>
<% end %>

