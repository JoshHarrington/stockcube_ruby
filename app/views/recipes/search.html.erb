<% provide(:title, 'Search Recipes') %>
<div class="main">
  <div class="container">
  <%= form_tag(search_recipe_path, :method => "get", id: "search-form") do %>
    <p>Search recipes</p>
    <br />
    <%= text_field_tag :search, params[:search], placeholder: "Search Recipes" %>
    <br />
    <br />
    <p>Search ingredients</p>
    <br />
    <%= text_field_tag :search_ingredients, params[:search_ingredients], placeholder: "Search Ingredients" %>
    <br />
    <br />
    <%= submit_tag "Search", :name => nil %>
  <% end %>
  <%= link_to "Clear form", search_recipe_path %>
  <br />
  <%= link_to "All recipes", recipes_path %>
  <br />
  <br />
  <br />

    <br />
    <br />

    <% if @final_recipes.present? %>
      <%= will_paginate(@final_recipes) %>
      <% @final_recipes.each do |recipe| %>
          <%= render 'recipe_list_partial', recipe: recipe %>
        <br/>
        <br/>
      <% end %>
      <%= will_paginate(@final_recipes) %>

      <% if @final_recipes.length < 3 %>
        <br>
        <br>
        <hr>
        <p>Here are some more random recipes you might like :)</p>
        <br>
        <br>

        <% @fallback_recipes.each do |recipe| %>
          <%= render 'recipe_list_partial', recipe: recipe %>
        <br/>
        <br/>
        <% end %>
      <% end %>

    <% else %>
      <p>There are no recipes containing "<%= params[:search] %>".</p>
      <br>
      <br>
      <p>Here are some random ones you might like :)</p>
      <br>
      <br>

      <% @fallback_recipes.each do |recipe| %>
        <%= render 'recipe_list_partial', recipe: recipe %>
      <br/>
      <br/>
      <% end %>
    <% end %>
  </div>
</div>